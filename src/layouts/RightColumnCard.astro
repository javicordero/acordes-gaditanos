---
const { title, headingId, class: className } = Astro.props;
// Build a stable id from the explicit `headingId` prop or the title.
const headingIdFinal =
  headingId ??
  `rightcard-${String(title || '')}`
    .toLowerCase()
    .replace(/[^a-z0-9]+/g, '-')
    .replace(/(^-|-$)/g, '');
---

<section class:list={[className]} aria-labelledby={headingIdFinal}>
  <header>
    <h3 id={headingIdFinal}>{title}</h3>
  </header>

  <div role='region' aria-labelledby={headingIdFinal}>
    <slot />
  </div>
</section>

<style>
  section {
    position: relative;
    border-radius: 8px;
    z-index: 0;
    display: flex;
    flex-direction: column;
    gap: 8px;

    &::after {
      content: '';
      display: block;
      position: absolute;
      inset: 0;
      border-radius: 8px;
      z-index: -1;
    }
  }

  header {
    display: flex;
    flex-direction: column;
    position: relative;
    width: fit-content;
  }

  h3 {
    color: var(--primary-color);
    font-size: 1.35rem;
    font-family: 'Montserrat', sans-serif;
    letter-spacing: 0.5px;
    font-weight: 700;
    margin: 0;

    &::after {
      content: '';
      display: block;
      position: absolute;
      bottom: -4px;
      width: 90%;
      height: 3px;
      background: var(--primary-contrast-color);
      border-radius: 2px;
    }
  }

  /* @media (--mq-sm) { */
  @media (max-width: 640px) {
    section {
      gap: var(--card-padding-sm);
      padding: 0;
    }
    h3 {
      font-size: var(--acorde-card-header-font-size-sm);
    }
  }
</style>
