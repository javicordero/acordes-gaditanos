---
import { getCollection, render } from 'astro:content';
import AcordeCard from '../../components/acorde-card.astro';
import Header from '../../components/header.astro';
import YoutubeCard from '../../components/youtube-card.astro';
import Layout from '../../layouts/Layout.astro';
import Footer from '../../components/footer.astro';
import SitiosDeInteresCard from '../../components/sitios-de-interes-card.astro';

export async function getStaticPaths() {
  const acordes = await getCollection('acordes');
  return acordes.map((acorde: { slug: any }) => ({
    params: { id: acorde.slug },
    props: { acorde },
  }));
}

const { acorde } = Astro.props;
const { data, slug } = acorde;
const { pieza, agrupacion, musica, img, year, letra, video, video2 } = data;
---

<Layout title={`${pieza} - ${agrupacion}`} description={`Acordes ${pieza} ${musica}`}>
  <Header />

  <main class='main-container container-layout'>
    <AcordeCard acorde={acorde} />

    <div class='right-column'>
      <YoutubeCard link={video} />

      {video2 && <YoutubeCard link={video2} />}
      <SitiosDeInteresCard />
    </div>
  </main>

  <Footer />
</Layout>

<style>
  main {
    display: flex;
    justify-content: space-between;
    row-gap: 16px;
    column-gap: 32px;
  }

  .right-column {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
  @media (max-width: 640px) {
    main {
      flex-direction: column;
    }
  }
</style>
