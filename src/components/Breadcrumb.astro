---
// Props:
// - year: string | number
// - agrupacion: string (opcional)
// - agrupacionSlug: string (opcional)
// - pieza: string (opcional)
// - autor: string (opcional)
// - autorSlug: string (opcional)
// - tipoAutor: 'musica' | 'letra' (opcional)
// - simple: boolean (solo año)
const {
  year,
  agrupacion,
  agrupacionSlug,
  pieza,
  autor,
  autorSlug,
  tipoAutor,
  simple = false,
} = Astro.props;
---

<div class='breadcrumb-container container-layout'>
  <nav aria-label='Navegación contextual' class='breadcrumb'>
    <a href='/'>Inicio</a>
    {
      year && (
        <>
          <span class='separator'>›</span>
          <a href={`/carnaval/${year}`}>Carnaval {year}</a>
        </>
      )
    }
    {
      agrupacion && agrupacionSlug && (
        <>
          <span class='separator'>›</span>
          <a href={`/agrupacion/${agrupacionSlug}`}>{agrupacion}</a>
        </>
      )
    }
    {
      pieza && (
        <>
          <span class='separator'>›</span>
          <span class='breadcrumb-piece'>{pieza}</span>
        </>
      )
    }
    {
      autor && autorSlug && tipoAutor && !year && !agrupacion && !pieza && (
        <>
          <span class='separator'>›</span>
          <span class='breadcrumb-piece'>{autor}</span>
        </>
      )
    }
  </nav>
</div>

<style>
  .breadcrumb-container {
    position: relative;
    top: calc(var(--nav-height) + 4px);
    height: 0;
    margin-top: 0;
    padding: 0;
  }
  .breadcrumb {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: nowrap;
    font-size: 0.87rem;
    color: var(--secondary-color);
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    & a {
      color: var(--primary-color);
      text-decoration: none;
      transition: color 0.2s ease;
      max-width: 220px;
      text-wrap: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      &:hover {
        color: var(--link-hover-color);
        text-decoration: none;
      }
    }
    & .separator {
      color: var(--secondary-color);
      user-select: none;
    }
    & .breadcrumb-piece {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: inline-block;
    }
  }
  @media (max-width: 640px) {
    .breadcrumb-container {
      top: calc(var(--nav-height) + 2px);
      /* height: 16px; */
    }
    .breadcrumb {
      font-size: 0.72rem;
      gap: 4px;
      & a {
        max-width: 540px;
      }

      & .breadcrumb-piece {
        max-width: 145px;
      }
    }
  }
</style>
